<!-- templates/create_prompt.html -->

<form id="promptForm">
    <label for="CMD">CMD:</label>
    <input type="text" id="CMD" name="CMD">
    
    <label for="tag">Tag:</label>
    <input type="text" id="tag" name="tag">
    
    <label for="SPINS">SPINS:</label>
    <input type="text" id="SPINS" name="SPINS">
    
    <input type="button" value="Submit" onclick="getPromptResults()">
</form>

<div id="results"></div>

<script>
function getPromptResults() {
    var cmd = $("#CMD").val();
    var tag = $("#tag").val();
    var spins = $("#SPINS").val();

    $.ajax({
        url: '/get_prompt_results',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ 'CMD': cmd, 'tag': tag, 'SPINS': spins }),
        success: function(response) {
            // Update the DOM with response data
            var resultHtml = "<h1>Response from OpenAI</h1><p>" + response.text_response + "</p>";
            resultHtml += "<h2>Difficult Words</h2><ul>";
            response.difficult_words.forEach(function(word) {
                resultHtml += "<li>" + word[0] + " - " + word[1] + "</li>";
            });
            resultHtml += "</ul>";
            $("#results").html(resultHtml);
        },
        error: function(error) {
            console.log(error);
        }
    });
}
</script>

<!-- Make sure to include jQuery if it's not already included -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
